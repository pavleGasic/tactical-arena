{
"version":3,
"file":"module$node_modules$$pixi$core$lib$geometry$Geometry.js",
"lineCount":130,
"mappings":"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",
"sources":["node_modules/@pixi/core/lib/geometry/Geometry.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$pixi$core$lib$geometry$Geometry\"] = function(global,require,module,exports) {\n\"use strict\";\nvar constants = require(\"@pixi/constants\"), runner = require(\"@pixi/runner\"), utils = require(\"@pixi/utils\"), Attribute = require(\"./Attribute.js\"), Buffer = require(\"./Buffer.js\"), interleaveTypedArrays = require(\"./utils/interleaveTypedArrays.js\");\nconst byteSizeMap = { 5126: 4, 5123: 2, 5121: 1 };\nlet UID = 0;\nconst map = {\n  Float32Array,\n  Uint32Array,\n  Int32Array,\n  Uint8Array,\n  Uint16Array\n};\nclass Geometry {\n  /**\n   * @param buffers - An array of buffers. optional.\n   * @param attributes - Of the geometry, optional structure of the attributes layout\n   */\n  constructor(buffers = [], attributes = {}) {\n    this.buffers = buffers, this.indexBuffer = null, this.attributes = attributes, this.glVertexArrayObjects = {}, this.id = UID++, this.instanced = !1, this.instanceCount = 1, this.disposeRunner = new runner.Runner(\"disposeGeometry\"), this.refCount = 0;\n  }\n  /**\n   *\n   * Adds an attribute to the geometry\n   * Note: `stride` and `start` should be `undefined` if you dont know them, not 0!\n   * @param id - the name of the attribute (matching up to a shader)\n   * @param {PIXI.Buffer|number[]} buffer - the buffer that holds the data of the attribute . You can also provide an Array and a buffer will be created from it.\n   * @param size - the size of the attribute. If you have 2 floats per vertex (eg position x and y) this would be 2\n   * @param normalized - should the data be normalized.\n   * @param [type=PIXI.TYPES.FLOAT] - what type of number is the attribute. Check {@link PIXI.TYPES} to see the ones available\n   * @param [stride=0] - How far apart, in bytes, the start of each value is. (used for interleaving data)\n   * @param [start=0] - How far into the array to start reading values (used for interleaving data)\n   * @param instance - Instancing flag\n   * @returns - Returns self, useful for chaining.\n   */\n  addAttribute(id, buffer, size = 0, normalized = !1, type, stride, start, instance = !1) {\n    if (!buffer)\n      throw new Error(\"You must pass a buffer when creating an attribute\");\n    buffer instanceof Buffer.Buffer || (buffer instanceof Array && (buffer = new Float32Array(buffer)), buffer = new Buffer.Buffer(buffer));\n    const ids = id.split(\"|\");\n    if (ids.length > 1) {\n      for (let i = 0; i < ids.length; i++)\n        this.addAttribute(ids[i], buffer, size, normalized, type);\n      return this;\n    }\n    let bufferIndex = this.buffers.indexOf(buffer);\n    return bufferIndex === -1 && (this.buffers.push(buffer), bufferIndex = this.buffers.length - 1), this.attributes[id] = new Attribute.Attribute(bufferIndex, size, normalized, type, stride, start, instance), this.instanced = this.instanced || instance, this;\n  }\n  /**\n   * Returns the requested attribute.\n   * @param id - The name of the attribute required\n   * @returns - The attribute requested.\n   */\n  getAttribute(id) {\n    return this.attributes[id];\n  }\n  /**\n   * Returns the requested buffer.\n   * @param id - The name of the buffer required.\n   * @returns - The buffer requested.\n   */\n  getBuffer(id) {\n    return this.buffers[this.getAttribute(id).buffer];\n  }\n  /**\n   *\n   * Adds an index buffer to the geometry\n   * The index buffer contains integers, three for each triangle in the geometry, which reference the various attribute buffers (position, colour, UV coordinates, other UV coordinates, normal, \u2026). There is only ONE index buffer.\n   * @param {PIXI.Buffer|number[]} [buffer] - The buffer that holds the data of the index buffer. You can also provide an Array and a buffer will be created from it.\n   * @returns - Returns self, useful for chaining.\n   */\n  addIndex(buffer) {\n    return buffer instanceof Buffer.Buffer || (buffer instanceof Array && (buffer = new Uint16Array(buffer)), buffer = new Buffer.Buffer(buffer)), buffer.type = constants.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER, this.indexBuffer = buffer, this.buffers.includes(buffer) || this.buffers.push(buffer), this;\n  }\n  /**\n   * Returns the index buffer\n   * @returns - The index buffer.\n   */\n  getIndex() {\n    return this.indexBuffer;\n  }\n  /**\n   * This function modifies the structure so that all current attributes become interleaved into a single buffer\n   * This can be useful if your model remains static as it offers a little performance boost\n   * @returns - Returns self, useful for chaining.\n   */\n  interleave() {\n    if (this.buffers.length === 1 || this.buffers.length === 2 && this.indexBuffer)\n      return this;\n    const arrays = [], sizes = [], interleavedBuffer = new Buffer.Buffer();\n    let i;\n    for (i in this.attributes) {\n      const attribute = this.attributes[i], buffer = this.buffers[attribute.buffer];\n      arrays.push(buffer.data), sizes.push(attribute.size * byteSizeMap[attribute.type] / 4), attribute.buffer = 0;\n    }\n    for (interleavedBuffer.data = interleaveTypedArrays.interleaveTypedArrays(arrays, sizes), i = 0; i < this.buffers.length; i++)\n      this.buffers[i] !== this.indexBuffer && this.buffers[i].destroy();\n    return this.buffers = [interleavedBuffer], this.indexBuffer && this.buffers.push(this.indexBuffer), this;\n  }\n  /** Get the size of the geometries, in vertices. */\n  getSize() {\n    for (const i in this.attributes) {\n      const attribute = this.attributes[i];\n      return this.buffers[attribute.buffer].data.length / (attribute.stride / 4 || attribute.size);\n    }\n    return 0;\n  }\n  /** Disposes WebGL resources that are connected to this geometry. */\n  dispose() {\n    this.disposeRunner.emit(this, !1);\n  }\n  /** Destroys the geometry. */\n  destroy() {\n    this.dispose(), this.buffers = null, this.indexBuffer = null, this.attributes = null;\n  }\n  /**\n   * Returns a clone of the geometry.\n   * @returns - A new clone of this geometry.\n   */\n  clone() {\n    const geometry = new Geometry();\n    for (let i = 0; i < this.buffers.length; i++)\n      geometry.buffers[i] = new Buffer.Buffer(this.buffers[i].data.slice(0));\n    for (const i in this.attributes) {\n      const attrib = this.attributes[i];\n      geometry.attributes[i] = new Attribute.Attribute(\n        attrib.buffer,\n        attrib.size,\n        attrib.normalized,\n        attrib.type,\n        attrib.stride,\n        attrib.start,\n        attrib.instance\n      );\n    }\n    return this.indexBuffer && (geometry.indexBuffer = geometry.buffers[this.buffers.indexOf(this.indexBuffer)], geometry.indexBuffer.type = constants.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER), geometry;\n  }\n  /**\n   * Merges an array of geometries into a new single one.\n   *\n   * Geometry attribute styles must match for this operation to work.\n   * @param geometries - array of geometries to merge\n   * @returns - Shiny new geometry!\n   */\n  static merge(geometries) {\n    const geometryOut = new Geometry(), arrays = [], sizes = [], offsets = [];\n    let geometry;\n    for (let i = 0; i < geometries.length; i++) {\n      geometry = geometries[i];\n      for (let j = 0; j < geometry.buffers.length; j++)\n        sizes[j] = sizes[j] || 0, sizes[j] += geometry.buffers[j].data.length, offsets[j] = 0;\n    }\n    for (let i = 0; i < geometry.buffers.length; i++)\n      arrays[i] = new map[utils.getBufferType(geometry.buffers[i].data)](sizes[i]), geometryOut.buffers[i] = new Buffer.Buffer(arrays[i]);\n    for (let i = 0; i < geometries.length; i++) {\n      geometry = geometries[i];\n      for (let j = 0; j < geometry.buffers.length; j++)\n        arrays[j].set(geometry.buffers[j].data, offsets[j]), offsets[j] += geometry.buffers[j].data.length;\n    }\n    if (geometryOut.attributes = geometry.attributes, geometry.indexBuffer) {\n      geometryOut.indexBuffer = geometryOut.buffers[geometry.buffers.indexOf(geometry.indexBuffer)], geometryOut.indexBuffer.type = constants.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;\n      let offset = 0, stride = 0, offset2 = 0, bufferIndexToCount = 0;\n      for (let i = 0; i < geometry.buffers.length; i++)\n        if (geometry.buffers[i] !== geometry.indexBuffer) {\n          bufferIndexToCount = i;\n          break;\n        }\n      for (const i in geometry.attributes) {\n        const attribute = geometry.attributes[i];\n        (attribute.buffer | 0) === bufferIndexToCount && (stride += attribute.size * byteSizeMap[attribute.type] / 4);\n      }\n      for (let i = 0; i < geometries.length; i++) {\n        const indexBufferData = geometries[i].indexBuffer.data;\n        for (let j = 0; j < indexBufferData.length; j++)\n          geometryOut.indexBuffer.data[j + offset2] += offset;\n        offset += geometries[i].buffers[bufferIndexToCount].data.length / stride, offset2 += indexBufferData.length;\n      }\n    }\n    return geometryOut;\n  }\n}\nexports.Geometry = Geometry;\n//# sourceMappingURL=Geometry.js.map\n\n};"],
"names":["shadow$provide","global","require","module","exports","constants","runner","utils","Attribute","Buffer","interleaveTypedArrays","byteSizeMap","UID","map","Float32Array","Uint32Array","Int32Array","Uint8Array","Uint16Array","Geometry","constructor","buffers","attributes","indexBuffer","glVertexArrayObjects","id","instanced","instanceCount","disposeRunner","Runner","refCount","addAttribute","buffer","size","normalized","type","stride","start","instance","Error","Array","ids","split","length","i","bufferIndex","indexOf","push","getAttribute","getBuffer","addIndex","BUFFER_TYPE","ELEMENT_ARRAY_BUFFER","includes","getIndex","interleave","arrays","sizes","interleavedBuffer","attribute","data","destroy","getSize","dispose","emit","clone","geometry","slice","attrib","merge","geometries","geometryOut","offsets","j","getBufferType","set","bufferIndexToCount","offset2","offset","indexBufferData"]
}
