{
"version":3,
"file":"module$node_modules$pixi_DOT_js$lib$scene$sprite$SpritePipe.js",
"lineCount":59,
"mappings":"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",
"sources":["node_modules/pixi_DOT_js/lib/scene/sprite/SpritePipe.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$pixi_DOT_js$lib$scene$sprite$SpritePipe\"] = function(global,require,module,exports) {\n'use strict';\n\nvar Extensions = require('../../extensions/Extensions.js');\nvar PoolGroup = require('../../utils/pool/PoolGroup.js');\nvar BatchableSprite = require('./BatchableSprite.js');\n\n\"use strict\";\nclass SpritePipe {\n  constructor(renderer) {\n    this._gpuSpriteHash = /* @__PURE__ */ Object.create(null);\n    this._destroyRenderableBound = this.destroyRenderable.bind(this);\n    this._renderer = renderer;\n    this._renderer.renderableGC.addManagedHash(this, \"_gpuSpriteHash\");\n  }\n  addRenderable(sprite, instructionSet) {\n    const gpuSprite = this._getGpuSprite(sprite);\n    if (sprite.didViewUpdate)\n      this._updateBatchableSprite(sprite, gpuSprite);\n    this._renderer.renderPipes.batch.addToBatch(gpuSprite, instructionSet);\n  }\n  updateRenderable(sprite) {\n    const gpuSprite = this._gpuSpriteHash[sprite.uid];\n    if (sprite.didViewUpdate)\n      this._updateBatchableSprite(sprite, gpuSprite);\n    gpuSprite._batcher.updateElement(gpuSprite);\n  }\n  validateRenderable(sprite) {\n    const gpuSprite = this._getGpuSprite(sprite);\n    return !gpuSprite._batcher.checkAndUpdateTexture(\n      gpuSprite,\n      sprite._texture\n    );\n  }\n  destroyRenderable(sprite) {\n    const batchableSprite = this._gpuSpriteHash[sprite.uid];\n    PoolGroup.BigPool.return(batchableSprite);\n    this._gpuSpriteHash[sprite.uid] = null;\n    sprite.off(\"destroyed\", this._destroyRenderableBound);\n  }\n  _updateBatchableSprite(sprite, batchableSprite) {\n    batchableSprite.bounds = sprite.visualBounds;\n    batchableSprite.texture = sprite._texture;\n  }\n  _getGpuSprite(sprite) {\n    return this._gpuSpriteHash[sprite.uid] || this._initGPUSprite(sprite);\n  }\n  _initGPUSprite(sprite) {\n    const batchableSprite = PoolGroup.BigPool.get(BatchableSprite.BatchableSprite);\n    batchableSprite.renderable = sprite;\n    batchableSprite.transform = sprite.groupTransform;\n    batchableSprite.texture = sprite._texture;\n    batchableSprite.bounds = sprite.visualBounds;\n    batchableSprite.roundPixels = this._renderer._roundPixels | sprite._roundPixels;\n    this._gpuSpriteHash[sprite.uid] = batchableSprite;\n    sprite.on(\"destroyed\", this._destroyRenderableBound);\n    return batchableSprite;\n  }\n  destroy() {\n    for (const i in this._gpuSpriteHash) {\n      PoolGroup.BigPool.return(this._gpuSpriteHash[i]);\n    }\n    this._gpuSpriteHash = null;\n    this._renderer = null;\n  }\n}\n/** @ignore */\nSpritePipe.extension = {\n  type: [\n    Extensions.ExtensionType.WebGLPipes,\n    Extensions.ExtensionType.WebGPUPipes,\n    Extensions.ExtensionType.CanvasPipes\n  ],\n  name: \"sprite\"\n};\n\nexports.SpritePipe = SpritePipe;\n//# sourceMappingURL=SpritePipe.js.map\n\n};"],
"names":["shadow$provide","global","require","module","exports","Extensions","PoolGroup","BatchableSprite","SpritePipe","constructor","renderer","_gpuSpriteHash","Object","create","_destroyRenderableBound","destroyRenderable","bind","_renderer","renderableGC","addManagedHash","addRenderable","sprite","instructionSet","gpuSprite","_getGpuSprite","didViewUpdate","_updateBatchableSprite","renderPipes","batch","addToBatch","updateRenderable","uid","_batcher","updateElement","validateRenderable","checkAndUpdateTexture","_texture","BigPool","return","batchableSprite","off","bounds","visualBounds","texture","_initGPUSprite","get","renderable","transform","groupTransform","roundPixels","_roundPixels","on","destroy","i","extension","type","ExtensionType","WebGLPipes","WebGPUPipes","CanvasPipes","name"]
}
