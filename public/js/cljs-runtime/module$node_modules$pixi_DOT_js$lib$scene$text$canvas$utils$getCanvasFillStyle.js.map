{
"version":3,
"file":"module$node_modules$pixi_DOT_js$lib$scene$text$canvas$utils$getCanvasFillStyle.js",
"lineCount":49,
"mappings":"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",
"sources":["node_modules/pixi_DOT_js/lib/scene/text/canvas/utils/getCanvasFillStyle.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$pixi_DOT_js$lib$scene$text$canvas$utils$getCanvasFillStyle\"] = function(global,require,module,exports) {\n'use strict';\n\nvar Color = require('../../../../color/Color.js');\nvar Matrix = require('../../../../maths/matrix/Matrix.js');\nvar Texture = require('../../../../rendering/renderers/shared/texture/Texture.js');\nvar warn = require('../../../../utils/logging/warn.js');\nvar FillGradient = require('../../../graphics/shared/fill/FillGradient.js');\nvar FillPattern = require('../../../graphics/shared/fill/FillPattern.js');\n\n\"use strict\";\nconst PRECISION = 1e5;\nfunction getCanvasFillStyle(fillStyle, context, textMetrics, padding = 0) {\n  if (fillStyle.texture === Texture.Texture.WHITE && !fillStyle.fill) {\n    return Color.Color.shared.setValue(fillStyle.color).setAlpha(fillStyle.alpha ?? 1).toHexa();\n  } else if (!fillStyle.fill) {\n    const pattern = context.createPattern(fillStyle.texture.source.resource, \"repeat\");\n    const tempMatrix = fillStyle.matrix.copyTo(Matrix.Matrix.shared);\n    tempMatrix.scale(fillStyle.texture.frame.width, fillStyle.texture.frame.height);\n    pattern.setTransform(tempMatrix);\n    return pattern;\n  } else if (fillStyle.fill instanceof FillPattern.FillPattern) {\n    const fillPattern = fillStyle.fill;\n    const pattern = context.createPattern(fillPattern.texture.source.resource, \"repeat\");\n    const tempMatrix = fillPattern.transform.copyTo(Matrix.Matrix.shared);\n    tempMatrix.scale(\n      fillPattern.texture.frame.width,\n      fillPattern.texture.frame.height\n    );\n    pattern.setTransform(tempMatrix);\n    return pattern;\n  } else if (fillStyle.fill instanceof FillGradient.FillGradient) {\n    const fillGradient = fillStyle.fill;\n    const isLinear = fillGradient.type === \"linear\";\n    const isLocal = fillGradient.textureSpace === \"local\";\n    let width = 1;\n    let height = 1;\n    if (isLocal && textMetrics) {\n      width = textMetrics.width + padding;\n      height = textMetrics.height + padding;\n    }\n    let gradient;\n    let isNearlyVertical = false;\n    if (isLinear) {\n      const { start, end } = fillGradient;\n      gradient = context.createLinearGradient(\n        start.x * width,\n        start.y * height,\n        end.x * width,\n        end.y * height\n      );\n      isNearlyVertical = Math.abs(end.x - start.x) < Math.abs((end.y - start.y) * 0.1);\n    } else {\n      const { center, innerRadius, outerCenter, outerRadius } = fillGradient;\n      gradient = context.createRadialGradient(\n        center.x * width,\n        center.y * height,\n        innerRadius * width,\n        outerCenter.x * width,\n        outerCenter.y * height,\n        outerRadius * width\n      );\n    }\n    if (isNearlyVertical && isLocal && textMetrics) {\n      const ratio = textMetrics.lineHeight / height;\n      for (let i = 0; i < textMetrics.lines.length; i++) {\n        const start = (i * textMetrics.lineHeight + padding / 2) / height;\n        fillGradient.colorStops.forEach((stop) => {\n          const globalStop = start + stop.offset * ratio;\n          gradient.addColorStop(\n            // fix to 5 decimal places to avoid floating point precision issues\n            Math.floor(globalStop * PRECISION) / PRECISION,\n            Color.Color.shared.setValue(stop.color).toHex()\n          );\n        });\n      }\n    } else {\n      fillGradient.colorStops.forEach((stop) => {\n        gradient.addColorStop(stop.offset, Color.Color.shared.setValue(stop.color).toHex());\n      });\n    }\n    return gradient;\n  }\n  warn.warn(\"FillStyle not recognised\", fillStyle);\n  return \"red\";\n}\n\nexports.getCanvasFillStyle = getCanvasFillStyle;\n//# sourceMappingURL=getCanvasFillStyle.js.map\n\n};"],
"names":["shadow$provide","global","require","module","exports","Color","Matrix","Texture","warn","FillGradient","FillPattern","getCanvasFillStyle","fillStyle","context","textMetrics","padding","texture","WHITE","fill","fillPattern","pattern","createPattern","source","resource","tempMatrix","transform","copyTo","shared","scale","frame","width","height","setTransform","fillGradient","isLinear","type","isLocal","textureSpace","gradient","isNearlyVertical","start","end","createLinearGradient","x","y","Math","abs","center","innerRadius","outerCenter","outerRadius","createRadialGradient","ratio","lineHeight","i","lines","length","colorStops","forEach","stop","addColorStop","floor","PRECISION","offset","setValue","color","toHex","matrix","setAlpha","alpha","toHexa"]
}
